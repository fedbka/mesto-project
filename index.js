(()=>{"use strict";var e="https://nomoreparties.co/v1/".concat("plus-cohort-15");function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n((function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_requestData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r={method:t,headers:o._config.headers};return"GET"!=t&&n&&(r.body=JSON.stringify(n)),fetch("".concat(o._config.baseUrl,"/").concat(e),r).then((function(e){return e.ok?e.json():Promise.reject(e)}))})),r(this,"getInitialCards",(function(){return o._requestData("cards")})),r(this,"getProfile",(function(){return o._requestData("users/me")})),r(this,"updateProfile",(function(e,t){return o._requestData("users/me","PATCH",{name:e,about:t})})),r(this,"setLike",(function(e){return o._requestData("cards/likes/".concat(e),"PUT")})),r(this,"unsetLike",(function(e){return o._requestData("cards/likes/".concat(e),"DELETE")})),r(this,"removeCard",(function(e){return o._requestData("cards/".concat(e),"DELETE")})),r(this,"addCard",(function(e,t){return o._requestData("cards/","POST",{name:e,link:t})})),r(this,"updateAvatar",(function(e){return o._requestData("users/me/avatar","PATCH",{avatar:e})})),this._baseUrl=t,this._authorizationToken=n,this._config={baseUrl:t,headers:{authorization:n,"Content-Type":"application/json"}}}));function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){function e(t,n,r,o,i,a,c,l,s,f,p,m){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_cardData",void 0),u(this,"_templateSelector",void 0),u(this,"_element",void 0),u(this,"_selectorCardElement",".element"),u(this,"_selectorCardImage",".element__image"),u(this,"_selectorCardTitle",".element__title"),u(this,"_selectorCardLikeButton",".element__like-button"),u(this,"_selectorCardDeleteButton",".element__delete-button"),u(this,"_selectorCardLikesCount",".element__likes-count"),u(this,"_cssClassCardLiked","element__like-button_liked"),u(this,"_cssClassCardDeleteButtonHidden","element__like-button_hidden"),u(this,"_imageClickHandler",void 0),u(this,"_checkInUserListHandler",void 0),u(this,"_checkOwnerHandler",void 0),u(this,"_addLikeHandler",void 0),u(this,"_removeLikeHandler",void 0),u(this,"_removeCardHandler",void 0),u(this,"_showErrorHandler",void 0),u(this,"_deleteConfirmHandler",void 0),u(this,"_closeDeleteConfirmAction",void 0),u(this,"_setConfirmButtonStateHandler",void 0),u(this,"_likeClickHandler",(function(){(d._cardLikeButton.classList.contains(d._cssClassCardLiked)?d._removeLikeHandler():d._addLikeHandler()).then((function(e){d._cardLikesCount.textContent=e.likes.length,d._cardLikeButton.classList.toggle(d._cssClassCardLiked)})).catch((function(e){return d._showErrorHandler(e)}))})),u(this,"_deleteCardHandler",(function(){d._deleteConfirmHandler((function(){d._setConfirmButtonStateHandler(),d._removeCardHandler(d._cardData._id).then((function(){d._element.remove(),d._closeDeleteConfirmAction()})).catch((function(e){return d._showErrorHandler(e)}))}))})),u(this,"_setEventListeners",(function(){d._cardImage.addEventListener("click",d._imageClickHandler),d._cardLikeButton.addEventListener("click",d._likeClickHandler),d._cardDeleteButton.addEventListener("click",d._deleteCardHandler)})),u(this,"getElement",(function(){return d._element=d._getCardElement(),d._cardImage=d._element.querySelector(d._selectorCardImage),d._cardImage.setAttribute("src",d._cardData.link),d._cardImage.setAttribute("alt",d._cardData.name),d._cardTitle=d._element.querySelector(d._selectorCardTitle),d._cardTitle.textContent=d._cardData.name,d._cardLikesCount=d._element.querySelector(d._selectorCardLikesCount),d._cardLikesCount.textContent=d._cardData.likes.length,d._cardLikeButton=d._element.querySelector(d._selectorCardLikeButton),d._owned=d._checkOwnerHandler(),d._isLiked=d._checkInUserListHandler(),d._cardDeleteButton=d._element.querySelector(d._selectorCardDeleteButton),d._owned&&d._cardDeleteButton.classList.remove(d._cssClassCardDeleteButtonHidden),d._isLiked&&d._cardLikeButton.classList.add(d._cssClassCardLiked),d._setEventListeners(),d._element})),this._templateSelector=n,this._cardData=t,this._imageClickHandler=r,this._checkInUserListHandler=o,this._checkOwnerHandler=i,this._addLikeHandler=a,this._removeLikeHandler=c,this._removeCardHandler=l,this._showErrorHandler=s,this._deleteConfirmHandler=f,this._closeDeleteConfirmAction=p,this._setConfirmButtonStateHandler=m}var t,n;return t=e,(n=[{key:"_getCardElement",value:function(){return document.querySelector(this._templateSelector).content.querySelector(this._selectorCardElement).cloneNode(!0)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_items",void 0),l(this,"_renderer",void 0),l(this,"_selectorContainer",void 0),l(this,"_container",void 0),this._selectorContainer=n,this._container=document.querySelector(this._selectorContainer),this._items=r,this._renderer=o,this.renderItems()}var t,n;return t=e,n=[{key:"updateItems",value:function(e){this._items=e}},{key:"renderItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._renderer(e);this.addItem(n,t)}},{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){return e.renderItem(t)}))}},{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?this._container.append(e):this._container.prepend(e)}}],n&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p(this,"_cssClassShowPopup","popup_opened"),p(this,"_cssClassPopup","popup"),p(this,"_cssClassPopupCloseButton","popup__close-button"),p(this,"_handleEscClose",(function(e){"Escape"===e.key&&n._elementPopup.classList.contains(n._cssClassShowPopup)&&n.close()})),p(this,"_handleClickClose",(function(e){(e.target.classList.contains(n._cssClassPopup)||e.target.classList.contains(n._cssClassPopupCloseButton))&&n.close()})),this._selectorPopup=t,this._elementPopup=document.querySelector(this._selectorPopup)}var t,n;return t=e,(n=[{key:"open",value:function(){this.setEventListeners(),this._elementPopup.classList.add(this._cssClassShowPopup)}},{key:"close",value:function(){this.removeEventListeners(),this._elementPopup.classList.remove(this._cssClassShowPopup)}},{key:"setEventListeners",value:function(){this._elementPopup.addEventListener("mousedown",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose)}},{key:"removeEventListeners",value:function(){this._elementPopup.removeEventListener("mousedown",this._handleClickClose),document.removeEventListener("keydown",this._handleEscClose)}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=y(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},_.apply(this,arguments)}function y(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),P(g(t=i.call(this,e)),"_selectorImage",".showroom__image"),P(g(t),"_selectorCaption",".showroom__caption"),t._elementImage=t._elementPopup.querySelector(t._selectorImage),t._elementCaption=t._elementPopup.querySelector(t._selectorCaption),t}return t=u,(n=[{key:"open",value:function(e,t){this._elementImage.setAttribute("src",e),this._elementImage.setAttribute("alt",t),this._elementCaption.textContent=t,_(w(u.prototype),"open",this).call(this)}},{key:"close",value:function(){this._elementImage.setAttribute("src",""),this._elementImage.setAttribute("alt",""),this._elementCaption.textContent="",_(w(u.prototype),"close",this).call(this)}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(m);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function L(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),B(I(t=i.call(this,e)),"_selectorCaption",".popup__error"),B(I(t),"_handleSubmitPreventDefault",(function(e){return e.preventDefault()})),t._elementCaption=t._elementPopup.querySelector(t._selectorCaption),t}return t=u,(n=[{key:"open",value:function(e){this._elementCaption.textContent=e,console.log(e),E(D(u.prototype),"open",this).call(this)}},{key:"setEventListeners",value:function(){E(D(u.prototype),"setEventListeners",this).call(this),this._elementPopup.addEventListener("submit",this._handleSubmitPreventDefault)}},{key:"removeEventListeners",value:function(){this._elementPopup.removeEventListener("submit",this._handleSubmitPreventDefault),E(D(u.prototype),"removeEventListeners",this).call(this)}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(m);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=T(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},R.apply(this,arguments)}function T(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function x(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),M(U(t=i.call(this,e)),"_selectorFormSubmitButton",".form__submit-button"),M(U(t),"_buttonFormSubmit",void 0),M(U(t),"_textFormSubmitButton",""),M(U(t),"_handleSubmitPreventDefault",(function(e){return e.preventDefault()})),t._buttonFormSubmit=t._elementPopup.querySelector(t._selectorFormSubmitButton),t._textFormSubmitButton=t._buttonFormSubmit?t._buttonFormSubmit.textContent:"",t}return t=u,n=[{key:"renderLoading",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Отправляем...";this._buttonFormSubmit.textContent=e?t:this._textFormSubmitButton}},{key:"setEventListeners",value:function(){R(V(u.prototype),"setEventListeners",this).call(this),this._elementPopup.addEventListener("submit",this._handleSubmitPreventDefault)}},{key:"removeEventListeners",value:function(){this._elementPopup.removeEventListener("submit",this._handleSubmitPreventDefault),R(V(u.prototype),"removeEventListeners",this).call(this)}},{key:"open",value:function(e){this.renderLoading(!1),this._actionAfterConfirm=e,this._elementPopup.addEventListener("submit",this._actionAfterConfirm),R(V(u.prototype),"open",this).call(this)}},{key:"close",value:function(){this._elementPopup.removeEventListener("submit",this._actionAfterConfirm),R(V(u.prototype),"close",this).call(this)}}],n&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(m);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=$(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},G.apply(this,arguments)}function $(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function K(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Q(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(r);if(o){var n=X(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return K(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),Y(Q(n=i.call(this,e)),"_selectorFormSubmitButton",".form__submit-button"),Y(Q(n),"_buttonFormSubmit",void 0),Y(Q(n),"_textFormSubmitButton",""),n._form=n._elementPopup.querySelector(".form"),n._submitHandler=n._getSubmitHandler(t),n._buttonFormSubmit=n._elementPopup.querySelector(n._selectorFormSubmitButton),n._textFormSubmitButton=n._buttonFormSubmit?n._buttonFormSubmit.textContent:"",n}return t=u,n=[{key:"_getSubmitHandler",value:function(e){var t=this;return function(n){n.preventDefault(),t.renderLoading(!0),e(t._getInputValues()).then((function(){return t.close()})).finally((function(){return t.renderLoading(!1)}))}}},{key:"_getInputValues",value:function(){var e=this._form.elements,t=Array.from(e).map((function(e){return{name:e.name,value:"checkbox"===e.type?e.checked:e.value}})).filter((function(e){return!!e.name}));return new Map(t.map((function(e){return[e.name,e.value]})))}},{key:"_setInputValues",value:function(e){var t=this._form.elements;Array.from(t).map((function(t){var n=t.name,r=t.type;n&&e[n]&&(t.value="checkbox"===r?!!e[n]:e[n])}))}},{key:"renderLoading",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Отправляем...";this._buttonFormSubmit.textContent=e?t:this._textFormSubmitButton}},{key:"getFormElement",value:function(){return this._form}},{key:"setEventListeners",value:function(){G(X(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitHandler)}},{key:"removeEventListeners",value:function(){this._form.removeEventListener("submit",this._submitHandler),G(X(u.prototype),"removeEventListeners",this).call(this)}},{key:"open",value:function(e){e&&this._setInputValues(e),G(X(u.prototype),"open",this).call(this)}},{key:"close",value:function(){this._form.reset(),G(X(u.prototype),"close",this).call(this)}}],n&&z(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(m);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(){function e(t){var n=t.selectorProfileUsername,r=t.selectorProfileDescription,o=t.selectorProfileAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ne(this,"_selectorProfileUsername",void 0),ne(this,"_selectorProfileDescription",void 0),ne(this,"_selectorProfileAvatar",void 0),ne(this,"_elementUsername",void 0),ne(this,"_elementDescription",void 0),ne(this,"_elementAvatar",void 0),ne(this,"_userInfo",{about:"",name:"",avatar:"",chohort:"",_id:""}),this._selectorProfileUsername=n,this._selectorProfileDescription=r,this._selectorProfileAvatar=o,this._getElements()}var t,n;return t=e,n=[{key:"_getElements",value:function(){this._elementUsername=document.querySelector(this._selectorProfileUsername),this._elementDescription=document.querySelector(this._selectorProfileDescription),this._elementAvatar=document.querySelector(this._selectorProfileAvatar)}},{key:"getUserInfo",value:function(){return this._userInfo}},{key:"setUserInfo",value:function(e){this._userInfo=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),this._renderProfile()}},{key:"checkInUserList",value:function(e){var t=this;return e.some((function(e){return t.usersEqual(e)}))}},{key:"usersEqual",value:function(e){return this._userInfo._id==e._id}},{key:"_renderProfile",value:function(){this._elementUsername.textContent=this._userInfo.name,this._elementDescription.textContent=this._userInfo.about,this._elementAvatar.setAttribute("src",this._userInfo.avatar)}}],n&&te(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ae=function(){function e(t,n){var r,o=this,i=t.selectorInput,u=(t.selectorInputError,t.selectorSubmitButton);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ue(this,"_cssFormItemWithError","form__item_invalid"),ue(this,"resetValidation",(function(){o._toggleFormButtonState(),o._inputsErrors.forEach((function(e,t){e.textContent="",t.classList.remove(o._cssFormItemWithError)}))})),ue(this,"_hasInvalidInput",(function(){return o._inputs.some((function(e){return!e.validity.valid}))})),ue(this,"_toggleFormButtonState",(function(){o._hasInvalidInput(o._inputs)?o._formSubmitButton.setAttribute("disabled",!0):o._formSubmitButton.removeAttribute("disabled",!1)})),ue(this,"_checkInputValidity",(function(e,t){e.validity.valid?(e.classList.remove(o._cssFormItemWithError),t.textContent=""):(e.setCustomValidity(e.validity.patternMismatch?e.dataset.errorMessage:""),e.classList.add(o._cssFormItemWithError),t.textContent=e.validationMessage)})),this._formElement=n,this._inputs=function(e){if(Array.isArray(e))return oe(e)}(r=this._formElement.querySelectorAll(i))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._inputsErrors=new Map,this._inputs.forEach((function(e){var t=o._formElement.querySelector(".".concat(e.id,"-error"));o._inputsErrors.set(e,t)})),this._formSubmitButton=this._formElement.querySelector(u)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;this._toggleFormButtonState(),this._inputs.forEach((function(t){return t.addEventListener("input",(function(){e._checkInputValidity(t,e._inputsErrors.get(t)),e._toggleFormButtonState()}))})),this._formElement.addEventListener("reset",(function(){return e._toggleFormButtonState()}))}}])&&ie(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var le={selectorInput:".form__item",selectorInputError:".form__input-error",selectorSubmitButton:".form__submit-button"},se=new o(e,"1eb95489-35af-40e1-aa20-3c2a6c828418"),fe=new re({selectorProfileUsername:".profile__user-name",selectorProfileDescription:".profile__user-description",selectorProfileAvatar:".profile__avatar"}),pe=new O(".popup_with-image"),me=new A(".popup_show-error"),de=new W(".popup_confirm"),he=new Z(".popup_avatar-edit",(function(e){return se.updateAvatar(e.get("avatarImageUrl")).then((function(e){return fe.setUserInfo(e)})).catch((function(e){return me.open(e)}))})),_e=new ae(le,he.getFormElement());_e.enableValidation(),document.querySelector(".profile__avatar-button").addEventListener("click",(function(){_e.resetValidation(),he.open()}));var ye=new Z(".popup_profile-edit",(function(e){return se.updateProfile(e.get("name"),e.get("about")).then((function(e){return fe.setUserInfo(e)})).catch((function(e){return me.open(e)}))})),be=new ae(le,ye.getFormElement());be.enableValidation(),document.querySelector(".profile__edit-button").addEventListener("click",(function(){be.resetValidation(),ye.open(fe.getUserInfo())}));var ve=new Z(".popup_add-element",(function(e){return se.addCard(e.get("elementName"),e.get("elementImageUrl")).then((function(e){return we.renderItem(e,!1)})).catch((function(e){return me.open(e)}))})),ge=new ae(le,ve.getFormElement());ge.enableValidation(),document.querySelector(".profile__add-photo-button").addEventListener("click",(function(){ge.resetValidation(),ve.open()}));var we=new s({items:[],renderer:function(e){var t=function(e){return new a(e,"#element__template",(function(){return pe.open(e.link,e.name)}),(function(){return fe.checkInUserList(e.likes)}),(function(){return fe.usersEqual(e.owner)}),(function(){return se.setLike(e._id)}),(function(){return se.unsetLike(e._id)}),se.removeCard,(function(e){return me.open(e)}),(function(e){return de.open(e)}),(function(){return de.close()}),(function(){return de.renderLoading(!0,"Удаляем...")}))}(e);return t.getElement()}},".elements");Promise.all([se.getProfile(),se.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];fe.setUserInfo(o),we.updateItems(i),we.renderItems()})).catch((function(e){return me.open(e)}))})();