(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var r=function(e){e.setAttribute("novalidation",!0),e.addEventListener("submit",(function(e){return e.preventDefault()}))},n=function(e,t){e.validity.valid?t.textContent="":(e.setCustomValidity(e.validity.patternMismatch?e.dataset.errorMessage:""),t.textContent=e.validationMessage)},o=function(e,t){i(e)?t.setAttribute("disabled",!0):t.removeAttribute("disabled",!1)},i=function(e){return e.some((function(e){return!e.validity.valid}))},u="popup_opened";function a(e){e.classList.remove(u),document.removeEventListener("keydown",s)}function c(e){e.classList.add(u),document.addEventListener("keydown",s)}function s(e){if("Escape"===e.key){var t=document.querySelector(".popup_opened");t&&a(t)}}var l=document.querySelector(".showroom__image"),d=document.querySelector(".showroom__caption"),m=document.querySelector(".popup_with-image"),p=document.querySelector(".popup_profile-edit"),f=document.querySelector(".profile__user-name"),y=document.querySelector(".profile__user-description"),v=document.forms.userProfile;v.addEventListener("submit",(function(){f.textContent=v.elements.username.value,y.textContent=v.elements.userDescription.value,a(p)}));var b=document.forms.newCard,S=document.querySelector(".popup_add-element");b.addEventListener("submit",(function(){a(S);var e=q(b.elements.elementName.value,b.elements.elementImageUrl.value);E(e),b.reset()}));var _,g,h=document.querySelector(".elements"),A=document.querySelector("#element__template"),q=function(e,t){var r=A.content.cloneNode(!0),n=r.querySelector(".element__image");n.setAttribute("src",t),n.setAttribute("alt",e),n.addEventListener("click",(function(){return r=e,n=t,l.setAttribute("src",n),l.setAttribute("alt",r),d.textContent=r,void c(m);var r,n})),r.querySelector(".element__title").textContent=e;var o=r.querySelector(".element__like-button");o.addEventListener("click",(function(){return o.classList.toggle("element__like-button_liked")}));var i=r.querySelector(".element__delete-button"),u=r.querySelector(".element");return i.addEventListener("click",(function(){return u.remove()})),r},E=function(e){h.prepend(e)};function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}[{name:"Архыз",imageUrl:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",imageUrl:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",imageUrl:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",imageUrl:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",imageUrl:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",imageUrl:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){return E(q(e.name,e.imageUrl))})),_={formSelector:".form",inputSelector:".form__item",inputErrorSelector:"form__input-error",submitButtonSelector:".form__submit-button"},e(document.querySelectorAll(_.formSelector)).forEach((function(t){return function(t,i){r(t);var u=t.querySelector(i.submitButtonSelector),a=e(t.querySelectorAll(i.inputSelector)),c=new Map;a.forEach((function(e){var r=t.querySelector(".".concat(e.id,"-error"));c.set(e,r)})),o(a,u),a.forEach((function(e){return e.addEventListener("input",(function(){n(e,c.get(e)),o(a,u)}))})),t.addEventListener("reset",(function(){o(a,u)}))}(t,_)})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){var e={username:f.textContent,userDescription:y.textContent};v.elements.username.value=e.username,v.elements.userDescription.value=e.userDescription,c(p)})),document.querySelector(".profile__add-photo-button").addEventListener("click",(function(){b.reset(),c(S)})),(function(e){if(Array.isArray(e))return k(e)}(g=document.querySelectorAll(".popup"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(g)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){return e.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("popup__close-button"))&&a(e)}))}))})();